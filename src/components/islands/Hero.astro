---
import { type Mode } from "../../types";
import gsap from "gsap";
import lenis from "lenis";
import { ArrowDown } from "lucide-react";
import { tv } from "tailwind-variants";
import { twMerge } from "tailwind-merge";
import type { ComponentProps } from "react";
import SplineViewer from "./SplineViewer";
import { getTranslations } from "@i18n";

const heroVariants = tv({
    base: "relative min-h-screen w-full flex flex-col justify-center px-6 lg:px-20 overflow-hidden pt-32 pb-20",
});

/**
 * Hero receives pre-resolved, locale+mode-aware strings from the Astro parent.
 * No i18n logic here — pure rendering.
 *
 * The Astro parent does:
 *   <Hero bio={profile.bio[mode]} role={profile.role[mode]} ... />
 */

const { lang } = Astro.props;
const profile = await getTranslations(lang, "profile");
interface HeroProps extends ComponentProps<"section"> {
    mode: Mode;
    bio: string;
    role: string;
    greeting: string;
    exploreWork: string;
    scroll: string;
}

const { mode, bio, role, greeting, exploreWork, scroll, ...props } =
    Astro.props;
---

<section>
    <div
        class="absolute inset-0 z-0 opacity-60 hero-parallax pointer-events-none"
    >
        <iframe
            src="https://my.spline.design/underwatertransition-PpOEUxeaaBac5MveqlrNIFpt/"
            class="w-full h-full border-0"
            title="3D Background"></iframe>
    </div>

    <div
        class="absolute inset-0 bg-gradient-to-t from-dark-bg via-transparent to-transparent z-0 pointer-events-none"
    >
    </div>
    <div
        class="absolute inset-0 z-0 opacity-[0.03] pointer-events-none mix-blend-overlay"
        style={{
            backgroundImage:
                'url("https://grainy-gradients.vercel.app/noise.svg")',
        }}
    >
    </div>

    <div class="relative z-10 max-w-4xl hero-parallax">
        <div
            class="inline-block px-3 py-1 mb-6 border border-white/10 rounded-full bg-white/5 backdrop-blur-sm"
        >
            <span
                class="text-xs font-mono text-neon-blue tracking-widest uppercase"
            >
                // {mode} Universe Active
            </span>
        </div>

        <h1
            class="text-6xl md:text-8xl font-bold leading-tight tracking-tighter text-white mb-6"
        >
            {greeting}
            <span
                class="text-transparent bg-clip-text bg-gradient-to-r from-neon-blue to-neon-purple text-glow"
                >Jônatas</span
            >
            <br />
            <span class="opacity-80 text-4xl md:text-6xl font-light"
                >{role}</span
            >
        </h1>

        <p
            class="text-lg md:text-xl text-slate-300 max-w-xl leading-relaxed mb-10 text-pretty"
        >
            {bio}
        </p>

        <!-- <button
            onclick={(e) =>
                document
                    .getElementById("projects")
                    ?.scrollIntoView({ behavior: "smooth" })}
            class="group relative px-8 py-4 bg-white text-black font-bold rounded-full overflow-hidden transition-all hover:scale-105 active:scale-95 cursor-pointer"
        >
            <span class="relative z-10 flex items-center gap-2">
                {exploreWork}
                <ArrowDown className="w-5 h-5" />
            </span>
            <div
                class="absolute inset-0 bg-gradient-to-r from-neon-blue to-neon-purple opacity-0 group-hover:opacity-100 transition-opacity duration-300"
            >
            </div>
        </button> -->
    </div>

    <div class="absolute bottom-10 right-10 hidden md:block animate-bounce">
        <div
            class="text-xs font-mono text-white/30 rotate-90 origin-bottom-right tracking-widest"
        >
            {scroll}
        </div>
    </div>
</section>

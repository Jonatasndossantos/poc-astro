---
import Layout from "@layouts/Layout.astro";
import Hero from "../../islands/Hero";
import { Mode } from "../../../types";
import PoC from "../../ui/PoC.astro";
import { getTranslations } from "../../../i18n/index";
import { getLangFromUrl } from "../../../i18n/utils";

export function getStaticPaths() {
    return ["pt", "en", "fr", "es", "zh", "ja", "en-GB"].map((locale) => ({
        params: { locale },
        props: { locale },
    }));
}

const { locale } = Astro.params;
const lang = getLangFromUrl(Astro.url);

const profile = (await getTranslations(lang, "profile")) as Record<
    string,
    unknown
>;
const bio = (profile.bio as Record<string, string>)?.[Mode.FRONTEND] ?? "";
const role = (profile.role as Record<string, string>)?.[Mode.FRONTEND] ?? "";
const greeting = String(profile.greeting ?? "");
const exploreWork = String(profile.exploreWork ?? "");
const scroll = String(profile.scroll ?? "");
---

<Layout
    title="Frontend"
    description={`${role} â€” ${bio.slice(0, 120)}...`}
    lang={locale}
>
    <main class="relative w-full overflow-hidden">
        <Hero
            client:load
            mode={Mode.FRONTEND}
            bio={bio}
            role={role}
            greeting={greeting}
            exploreWork={exploreWork}
            scroll={scroll}
        />
        <div class="relative z-10 bg-base-100">
            <PoC />
        </div>
    </main>
</Layout>

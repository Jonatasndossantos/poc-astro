---
import Layout from "@layouts/Layout.astro";
import Hero from "@islands/Hero.astro";
import { Mode } from "../../../types";
import { getTranslations, locales } from "@i18n";
import { getRelativeLocaleUrl } from "astro:i18n";

export function getStaticPaths() {
    return locales.map((locale) => ({
        params: { locale },
        props: { locale },
    }));
}

const { locale } = Astro.params;
const lang = getRelativeLocaleUrl(locale);

const profile = (await getTranslations(lang, "profile")) as Record<
    string,
    unknown
>;
const bio = (profile.bio as Record<string, string>)?.[Mode.FULLSTACK] ?? "";
const role = (profile.role as Record<string, string>)?.[Mode.FULLSTACK] ?? "";
---

<Layout
    title="Fullstack"
    description={`${role} â€” ${bio.slice(0, 120)}...`}
    lang={locale}
>
    <main class="relative w-full overflow-hidden">
        <Hero mode={Mode.FULLSTACK} lang={locale} />
        <div class="relative z-10 bg-base-100"></div>
    </main>
</Layout>
